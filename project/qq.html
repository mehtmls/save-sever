<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>自定义QQ分享卡片示例</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">

  <!-- 默认分享配置 -->
  <meta itemprop="name" content="默认标题">
  <meta name="description" itemprop="description" content="这是默认描述">
  <meta itemprop="image" content="https://example.com/default.png">

  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    button { margin: 10px 0; padding: 10px 20px; font-size: 16px; }
  </style>
</head>
<body>
  <h1>自定义QQ分享卡片</h1>
  <p>点击按钮即可动态修改 QQ 分享卡片的标题、描述、图片。</p>
  <button onclick="setQQShareCard({
      title: '体验AI代码助手',
      desc: '一款智能的AI代码解读与优化工具',
      imgUrl: 'https://qzonestyle.gtimg.cn/qzone/qzactStatics/imgs/20171123191603.png'
    })">
    设置为“AI助手分享卡片”
  </button>

  <button onclick="setQQShareCard({
      title: '自定义标题示例',
      desc: '这里是一个自定义描述内容',
      imgUrl: 'https://www.baidu.com/img/bd_logo1.png'
    })">
    设置为“自定义卡片”
  </button>

  <script>
    // 动态设置 QQ 分享卡片
    function setQQShareCard(shareConfig) {
      let { title, desc, imgUrl } = shareConfig
      let metaArr = [
        {
          attriKeyArr: ['itemprop'],
          attriVal: 'name',
          content: title
        },
        {
          attriKeyArr: ['name', 'itemprop'],
          attriVal: 'description',
          content: desc
        },
        {
          attriKeyArr: ['itemprop'],
          attriVal: 'image',
          content: imgUrl
        }
      ]
      metaArr.forEach(metaData => resetMeta(metaData))
      console.log("QQ分享卡片已更新：", shareConfig)
    }

    function resetMeta(metaData) {
      let { attriKeyArr, attriVal, content } = metaData
      let headDom = document.getElementsByTagName('head')[0]
      let metaDom = document.querySelector(`meta[${attriKeyArr[0]}="${attriVal}"]`)
      if (metaDom) headDom.removeChild(metaDom)
      metaDom = document.createElement('meta')
      attriKeyArr.forEach(attriKey => {
        metaDom.setAttribute(attriKey, attriVal)
      })
      metaDom.content = content
      headDom.appendChild(metaDom)
    }
  </script>
</body>
</html>
